<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Software PWM: MD_PWM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MajicDesigns_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Software PWM<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Software PWM for any digital pin</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_m_d___p_w_m.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_m_d___p_w_m-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MD_PWM Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;MD_PWM.h&gt;</code></p>
<div class="dynheader">
Collaboration diagram for MD_PWM:</div>
<div class="dyncontent">
<div class="center"><img src="class_m_d___p_w_m__coll__graph.png" border="0" usemap="#a_m_d___p_w_m_coll__map" alt="Collaboration graph"/></div>
<map name="a_m_d___p_w_m_coll__map" id="a_m_d___p_w_m_coll__map">
<area shape="rect" title=" " alt="" coords="5,5,88,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Class constructor and destructor.</div></td></tr>
<tr class="memitem:af86a7be79a14eaf75432e33dda3712ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#af86a7be79a14eaf75432e33dda3712ad">MD_PWM</a> (uint8_t pin)</td></tr>
<tr class="separator:af86a7be79a14eaf75432e33dda3712ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7820ce44061d7202c2b1e3007ca73d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#acb7820ce44061d7202c2b1e3007ca73d">~MD_PWM</a> (void)</td></tr>
<tr class="separator:acb7820ce44061d7202c2b1e3007ca73d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Methods for core object control.</div></td></tr>
<tr class="memitem:a6a80bf2c7e66ac235b6d1dcbe54d5d06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#a6a80bf2c7e66ac235b6d1dcbe54d5d06">begin</a> (uint16_t freq=<a class="el" href="class_m_d___p_w_m.html#af4f54212212653d5dd42cc902a828029">MAX_FREQUENCY</a>)</td></tr>
<tr class="separator:a6a80bf2c7e66ac235b6d1dcbe54d5d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac427ef8386e5b7fcca36011b99162f1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#ac427ef8386e5b7fcca36011b99162f1e">write</a> (uint8_t duty)</td></tr>
<tr class="separator:ac427ef8386e5b7fcca36011b99162f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a611f8ead528672d3079cbacf519da52c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#a611f8ead528672d3079cbacf519da52c">disable</a> (void)</td></tr>
<tr class="separator:a611f8ead528672d3079cbacf519da52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8632e2ffb14d5ccec9388211517ac57e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#a8632e2ffb14d5ccec9388211517ac57e">enable</a> (void)</td></tr>
<tr class="separator:a8632e2ffb14d5ccec9388211517ac57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">ISR use only - NOT FOR END USERS.</div></td></tr>
<tr class="memitem:afaeb65a71ca21a1b3697ce81f184cf4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d___p_w_m.html#afaeb65a71ca21a1b3697ce81f184cf4f">setPin</a> (void)</td></tr>
<tr class="separator:afaeb65a71ca21a1b3697ce81f184cf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:af4f54212212653d5dd42cc902a828029"><td class="memItemLeft" align="right" valign="top"><a id="af4f54212212653d5dd42cc902a828029" name="af4f54212212653d5dd42cc902a828029"></a>
static const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_FREQUENCY</b> = 300</td></tr>
<tr class="memdesc:af4f54212212653d5dd42cc902a828029"><td class="mdescLeft">&#160;</td><td class="mdescRight">the maximum PWM frequency allowed <br /></td></tr>
<tr class="separator:af4f54212212653d5dd42cc902a828029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac40f25031ebe16776986fcb10ef40bd"><td class="memItemLeft" align="right" valign="top"><a id="aac40f25031ebe16776986fcb10ef40bd" name="aac40f25031ebe16776986fcb10ef40bd"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_PWM_PIN</b> = 4</td></tr>
<tr class="memdesc:aac40f25031ebe16776986fcb10ef40bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of concurrent PWM pins that can be used <br /></td></tr>
<tr class="separator:aac40f25031ebe16776986fcb10ef40bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e21aa97fe58f4b5c961ee15a461a6d"><td class="memItemLeft" align="right" valign="top"><a id="a14e21aa97fe58f4b5c961ee15a461a6d" name="a14e21aa97fe58f4b5c961ee15a461a6d"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>_bInitialised</b> = false</td></tr>
<tr class="memdesc:a14e21aa97fe58f4b5c961ee15a461a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR - Global vector initialization flag. <br /></td></tr>
<tr class="separator:a14e21aa97fe58f4b5c961ee15a461a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f3ebd4139c9baea5fbf2ca2c8c6b1d3"><td class="memItemLeft" align="right" valign="top"><a id="a4f3ebd4139c9baea5fbf2ca2c8c6b1d3" name="a4f3ebd4139c9baea5fbf2ca2c8c6b1d3"></a>
static volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_pinCount</b></td></tr>
<tr class="memdesc:a4f3ebd4139c9baea5fbf2ca2c8c6b1d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR - Number of pins currently configured. <br /></td></tr>
<tr class="separator:a4f3ebd4139c9baea5fbf2ca2c8c6b1d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d19bbaaa0bfe728963840435132e1e"><td class="memItemLeft" align="right" valign="top"><a id="a13d19bbaaa0bfe728963840435132e1e" name="a13d19bbaaa0bfe728963840435132e1e"></a>
static <a class="el" href="class_m_d___p_w_m.html">MD_PWM</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>_cbInstance</b> []</td></tr>
<tr class="memdesc:a13d19bbaaa0bfe728963840435132e1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR - Callback instance handle per pin slot. <br /></td></tr>
<tr class="separator:a13d19bbaaa0bfe728963840435132e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Core object for the <a class="el" href="class_m_d___p_w_m.html">MD_PWM</a> library </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af86a7be79a14eaf75432e33dda3712ad" name="af86a7be79a14eaf75432e33dda3712ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86a7be79a14eaf75432e33dda3712ad">&#9670;&nbsp;</a></span>MD_PWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MD_PWM::MD_PWM </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Class Constructor</p>
<p >Instantiate a new instance of the class.</p>
<p >The main function for the core object is to set the internal shared variables and timers to default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>pin number for this PWM output. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acb7820ce44061d7202c2b1e3007ca73d" name="acb7820ce44061d7202c2b1e3007ca73d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7820ce44061d7202c2b1e3007ca73d">&#9670;&nbsp;</a></span>~MD_PWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MD_PWM::~MD_PWM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Class Destructor.</p>
<p >Release any allocated memory and clean up anything else.</p>
<p >If all the instances of the class are closed, then the ISR is disconnected and the timer is stopped. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6a80bf2c7e66ac235b6d1dcbe54d5d06" name="a6a80bf2c7e66ac235b6d1dcbe54d5d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a80bf2c7e66ac235b6d1dcbe54d5d06">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MD_PWM::begin </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>freq</em> = <code><a class="el" href="class_m_d___p_w_m.html#af4f54212212653d5dd42cc902a828029">MAX_FREQUENCY</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize the object.</p>
<p >Initialize the object data. This needs to be called during setup() to set items that cannot be done during object creation.</p>
<p >If this is the first instance of this class, then the ISR code is initialized and the frequency of the hardware timer is set. Subsequent instances do not affect the timer frequency.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_d___p_w_m.html#a8632e2ffb14d5ccec9388211517ac57e">enable()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>the PWM frequency in Hz [0..MAX_FREQUENCY] (first instance only). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the pin was successfully enabled for PWM. </dd></dl>

</div>
</div>
<a id="a611f8ead528672d3079cbacf519da52c" name="a611f8ead528672d3079cbacf519da52c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a611f8ead528672d3079cbacf519da52c">&#9670;&nbsp;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_PWM::disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Disable PWM output for this pin.</p>
<p >Stops PWM output for the pin related to this class instance. The pin relinquishes its slot allocated for the ISR [0..MAX_PWM_PINS], which can be reused for another pin if needed.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_d___p_w_m.html#a8632e2ffb14d5ccec9388211517ac57e">enable()</a> </dd></dl>

</div>
</div>
<a id="a8632e2ffb14d5ccec9388211517ac57e" name="a8632e2ffb14d5ccec9388211517ac57e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8632e2ffb14d5ccec9388211517ac57e">&#9670;&nbsp;</a></span>enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MD_PWM::enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Enables PWM output for this pin.</p>
<p >Starts PWM output for the pin related to this class instance. The pin takes the next available slot allocated for the ISR [0..MAX_PWM_PINS]. If no slots are available, then the method returns false.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_d___p_w_m.html#a611f8ead528672d3079cbacf519da52c">disable()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if the pin was successfully enabled. </dd></dl>

</div>
</div>
<a id="afaeb65a71ca21a1b3697ce81f184cf4f" name="afaeb65a71ca21a1b3697ce81f184cf4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaeb65a71ca21a1b3697ce81f184cf4f">&#9670;&nbsp;</a></span>setPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_PWM::setPin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set the output pin (for ISR use only).</p>
<p >Set the output PWM pin based on the current counter value. This is called 255 times during each PWM cycle.</p>
<p >This method is for use only by the TIMERn ISR. </p>

</div>
</div>
<a id="ac427ef8386e5b7fcca36011b99162f1e" name="ac427ef8386e5b7fcca36011b99162f1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac427ef8386e5b7fcca36011b99162f1e">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_PWM::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>duty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Write PWM output value.</p>
<p >Set the PWM output value for the pin. This works like the standard analogWrite() for hardware enabled PWM - 0% duty cycle is 0, 50% is 127 and 100% is 255.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duty</td><td>the PWM duty cycle [0..255]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_m_d___p_w_m_8h.html">MD_PWM.h</a></li>
<li>src/<a class="el" href="_m_d___p_w_m_8cpp.html">MD_PWM.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_m_d___p_w_m.html">MD_PWM</a></li>
    <li class="footer">Generated on Tue Sep 28 2021 10:38:40 for Software PWM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
